import{s as Y,e as k,c as $,b as x,f as _,y as T,i as A,z as se,k as ie,a as D,t as I,g as j,d as O,h as p,C as oe,j as N,B as G,n as S,H as fe,J as ue,r as de}from"../chunks/scheduler.DrDOSCrp.js";import{S as K,i as Q,t as M,g as re,e as ae,b as C,c as U,a as P,m as z,d as q,f as he}from"../chunks/index.BljkXhbZ.js";import{d as ce}from"../chunks/index.D0tE5qX2.js";import{e as F,t as me,c as pe}from"../chunks/Icon.C5GaHf5i.js";import{T as _e}from"../chunks/tag.COAFjn-V.js";import{f as J}from"../chunks/format.DS6QGfyw.js";import{D as ge}from"../chunks/download.BFTxnY3b.js";const be=()=>({}),Se=Object.freeze(Object.defineProperty({__proto__:null,load:be},Symbol.toStringTag,{value:"Module"}));function X(r,e,n){const t=r.slice();return t[5]=e[n],t}function Z(r){let e,n,t,s=r[5]+"",c,o,a,l,i,u;n=new _e({props:{class:"w-3 h-3"}});function f(){return r[4](r[5])}return{c(){e=k("button"),U(n.$$.fragment),t=D(),c=I(s),o=D(),this.h()},l(m){e=$(m,"BUTTON",{class:!0});var d=x(e);P(n.$$.fragment,d),t=j(d),c=O(d,s),o=j(d),d.forEach(_),this.h()},h(){T(e,"class",a="flex items-center gap-1 px-3 py-1.5 rounded-full text-sm transition-colors font-jetbrains-mono "+(r[0].includes(r[5])?"bg-navy-600 text-white":"bg-navy-50 text-navy-600 hover:bg-navy-100"))},m(m,d){A(m,e,d),z(n,e,null),p(e,t),p(e,c),p(e,o),l=!0,i||(u=oe(e,"click",f),i=!0)},p(m,d){r=m,(!l||d&2)&&s!==(s=r[5]+"")&&N(c,s),(!l||d&3&&a!==(a="flex items-center gap-1 px-3 py-1.5 rounded-full text-sm transition-colors font-jetbrains-mono "+(r[0].includes(r[5])?"bg-navy-600 text-white":"bg-navy-50 text-navy-600 hover:bg-navy-100")))&&T(e,"class",a)},i(m){l||(M(n.$$.fragment,m),l=!0)},o(m){C(n.$$.fragment,m),l=!1},d(m){m&&_(e),q(n),i=!1,u()}}}function ve(r){let e,n,t=F(r[1]),s=[];for(let o=0;o<t.length;o+=1)s[o]=Z(X(r,t,o));const c=o=>C(s[o],1,1,()=>{s[o]=null});return{c(){e=k("div");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){e=$(o,"DIV",{class:!0});var a=x(e);for(let l=0;l<s.length;l+=1)s[l].l(a);a.forEach(_),this.h()},h(){T(e,"class","flex flex-wrap gap-2 mb-6")},m(o,a){A(o,e,a);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(e,null);n=!0},p(o,[a]){if(a&11){t=F(o[1]);let l;for(l=0;l<t.length;l+=1){const i=X(o,t,l);s[l]?(s[l].p(i,a),M(s[l],1)):(s[l]=Z(i),s[l].c(),M(s[l],1),s[l].m(e,null))}for(re(),l=t.length;l<s.length;l+=1)c(l);ae()}},i(o){if(!n){for(let a=0;a<t.length;a+=1)M(s[a]);n=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)C(s[a]);n=!1},d(o){o&&_(e),se(s,o)}}}function ye(r,e,n){let t,{selectedTags:s=[]}=e;const c=ce(me,l=>{const i=new Set;return l.tasks.forEach(u=>{u.labels?.forEach(f=>i.add(f))}),Array.from(i).sort()});ie(r,c,l=>n(1,t=l));function o(l){n(0,s=s.includes(l)?s.filter(i=>i!==l):[...s,l])}const a=l=>o(l);return r.$$set=l=>{"selectedTags"in l&&n(0,s=l.selectedTags)},[s,t,c,o,a]}class ke extends K{constructor(e){super(),Q(this,e,ye,ve,Y,{selectedTags:0})}}function ee(r,e,n){const t=r.slice();return t[1]=e[n],t}function te(r){let e,n,t=r[1].recurrence+"",s;return{c(){e=k("div"),n=I("Recurring: "),s=I(t),this.h()},l(c){e=$(c,"DIV",{class:!0});var o=x(e);n=O(o,"Recurring: "),s=O(o,t),o.forEach(_),this.h()},h(){T(e,"class","text-xs text-navy-500 mt-1")},m(c,o){A(c,e,o),p(e,n),p(e,s)},p(c,o){o&1&&t!==(t=c[1].recurrence+"")&&N(s,t)},d(c){c&&_(e)}}}function le(r){let e=J(r[1].completedAt,"MMM d, yyyy")+"",n;return{c(){n=I(e)},l(t){n=O(t,e)},m(t,s){A(t,n,s)},p(t,s){s&1&&e!==(e=J(t[1].completedAt,"MMM d, yyyy")+"")&&N(n,e)},d(t){t&&_(n)}}}function ne(r){let e,n,t,s=r[1].title+"",c,o,a,l,i,u,f=(r[1].notes||"")+"",m,d,h=r[1].recurrence&&te(r),g=r[1].completedAt&&le(r);return{c(){e=k("tr"),n=k("td"),t=k("div"),c=I(s),o=D(),h&&h.c(),a=D(),l=k("td"),g&&g.c(),i=D(),u=k("td"),m=I(f),d=D(),this.h()},l(v){e=$(v,"TR",{class:!0});var y=x(e);n=$(y,"TD",{class:!0});var R=x(n);t=$(R,"DIV",{});var V=x(t);c=O(V,s),V.forEach(_),o=j(R),h&&h.l(R),R.forEach(_),a=j(y),l=$(y,"TD",{class:!0});var H=x(l);g&&g.l(H),H.forEach(_),i=j(y),u=$(y,"TD",{class:!0});var w=x(u);m=O(w,f),w.forEach(_),d=j(y),y.forEach(_),this.h()},h(){T(n,"class","py-3 px-4"),T(l,"class","py-3 px-4"),T(u,"class","py-3 px-4 whitespace-pre-line"),T(e,"class","border-b border-navy-50 hover:bg-navy-50/50")},m(v,y){A(v,e,y),p(e,n),p(n,t),p(t,c),p(n,o),h&&h.m(n,null),p(e,a),p(e,l),g&&g.m(l,null),p(e,i),p(e,u),p(u,m),p(e,d)},p(v,y){y&1&&s!==(s=v[1].title+"")&&N(c,s),v[1].recurrence?h?h.p(v,y):(h=te(v),h.c(),h.m(n,null)):h&&(h.d(1),h=null),v[1].completedAt?g?g.p(v,y):(g=le(v),g.c(),g.m(l,null)):g&&(g.d(1),g=null),y&1&&f!==(f=(v[1].notes||"")+"")&&N(m,f)},d(v){v&&_(e),h&&h.d(),g&&g.d()}}}function $e(r){let e,n,t,s='<tr class="border-b border-navy-100"><th class="py-3 px-4 text-left font-medium text-navy-600">Task</th> <th class="py-3 px-4 text-left font-medium text-navy-600">Completed</th> <th class="py-3 px-4 text-left font-medium text-navy-600">Notes</th></tr>',c,o,a=F(r[0]),l=[];for(let i=0;i<a.length;i+=1)l[i]=ne(ee(r,a,i));return{c(){e=k("div"),n=k("table"),t=k("thead"),t.innerHTML=s,c=D(),o=k("tbody");for(let i=0;i<l.length;i+=1)l[i].c();this.h()},l(i){e=$(i,"DIV",{class:!0});var u=x(e);n=$(u,"TABLE",{class:!0});var f=x(n);t=$(f,"THEAD",{"data-svelte-h":!0}),G(t)!=="svelte-yslab2"&&(t.innerHTML=s),c=j(f),o=$(f,"TBODY",{});var m=x(o);for(let d=0;d<l.length;d+=1)l[d].l(m);m.forEach(_),f.forEach(_),u.forEach(_),this.h()},h(){T(n,"class","w-full text-sm font-jetbrains-mono"),T(e,"class","overflow-x-auto")},m(i,u){A(i,e,u),p(e,n),p(n,t),p(n,c),p(n,o);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(o,null)},p(i,[u]){if(u&1){a=F(i[0]);let f;for(f=0;f<a.length;f+=1){const m=ee(i,a,f);l[f]?l[f].p(m,u):(l[f]=ne(m),l[f].c(),l[f].m(o,null))}for(;f<l.length;f+=1)l[f].d(1);l.length=a.length}},i:S,o:S,d(i){i&&_(e),se(l,i)}}}function Te(r,e,n){let{tasks:t}=e;return r.$$set=s=>{"tasks"in s&&n(0,t=s.tasks)},[t]}class xe extends K{constructor(e){super(),Q(this,e,Te,$e,Y,{tasks:0})}}function Ee(r){const e=["Title","Description","Notes","Completed Date","Tags","Recurrence"],n=r.map(o=>[o.title,o.description||"",o.notes||"",o.completedAt?J(o.completedAt,"yyyy-MM-dd"):"",o.labels?.join(", ")||"",o.recurrence||""]),t=[e.join(","),...n.map(o=>o.map(a=>`"${a}"`).join(","))].join(`
`),s=new Blob([t],{type:"text/csv;charset=utf-8;"}),c=document.createElement("a");c.href=URL.createObjectURL(s),c.download=`tasks-${J(new Date,"yyyy-MM-dd")}.csv`,c.click()}function we(r){let e,n;return e=new xe({props:{tasks:r[2]}}),{c(){U(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,s){z(e,t,s),n=!0},p(t,s){const c={};s&4&&(c.tasks=t[2]),e.$set(c)},i(t){n||(M(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function De(r){let e,n="No completed tasks";return{c(){e=k("p"),e.textContent=n,this.h()},l(t){e=$(t,"P",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-u3g990"&&(e.textContent=n),this.h()},h(){T(e,"class","text-navy-500 text-center py-8 font-jetbrains-mono")},m(t,s){A(t,e,s)},p:S,i:S,o:S,d(t){t&&_(e)}}}function je(r){let e,n,t,s="Logbook",c,o,a,l,i,u,f,m,d,h,g,v,y;a=new ge({props:{class:"w-4 h-4"}});function R(b){r[4](b)}let V={};r[0]!==void 0&&(V.selectedTags=r[0]),u=new ke({props:V}),fe.push(()=>he(u,"selectedTags",R));const H=[De,we],w=[];function W(b,E){return b[2].length===0?0:1}return d=W(r),h=w[d]=H[d](r),{c(){e=k("div"),n=k("div"),t=k("h2"),t.textContent=s,c=D(),o=k("button"),U(a.$$.fragment),l=I(`
      Export`),i=D(),U(u.$$.fragment),m=D(),h.c(),this.h()},l(b){e=$(b,"DIV",{class:!0});var E=x(e);n=$(E,"DIV",{class:!0});var L=x(n);t=$(L,"H2",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-chtidl"&&(t.textContent=s),c=j(L),o=$(L,"BUTTON",{class:!0});var B=x(o);P(a.$$.fragment,B),l=O(B,`
      Export`),B.forEach(_),L.forEach(_),i=j(E),P(u.$$.fragment,E),m=j(E),h.l(E),E.forEach(_),this.h()},h(){T(t,"class","text-2xl font-bold text-navy-900 font-jetbrains-mono"),T(o,"class","inline-flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-navy-600 hover:text-navy-800 hover:bg-navy-50 rounded-md transition-colors"),T(n,"class","flex justify-between items-center"),T(e,"class","space-y-6")},m(b,E){A(b,e,E),p(e,n),p(n,t),p(n,c),p(n,o),z(a,o,null),p(o,l),p(e,i),z(u,e,null),p(e,m),w[d].m(e,null),g=!0,v||(y=oe(o,"click",r[3]),v=!0)},p(b,[E]){const L={};!f&&E&1&&(f=!0,L.selectedTags=b[0],ue(()=>f=!1)),u.$set(L);let B=d;d=W(b),d===B?w[d].p(b,E):(re(),C(w[B],1,1,()=>{w[B]=null}),ae(),h=w[d],h?h.p(b,E):(h=w[d]=H[d](b),h.c()),M(h,1),h.m(e,null))},i(b){g||(M(a.$$.fragment,b),M(u.$$.fragment,b),M(h),g=!0)},o(b){C(a.$$.fragment,b),C(u.$$.fragment,b),C(h),g=!1},d(b){b&&_(e),q(a),q(u),w[d].d(),v=!1,y()}}}function Me(r,e,n){let t,s,c=S,o=()=>(c(),c=de(t,u=>n(2,s=u)),t);r.$$.on_destroy.push(()=>c());let a=[];function l(){Ee(s)}function i(u){a=u,n(0,a)}return r.$$.update=()=>{r.$$.dirty&1&&o(n(1,t=ce(pe,u=>a.length>0?u.filter(f=>f.labels?.some(m=>a.includes(m))):u)))},[a,t,s,l,i]}class Ve extends K{constructor(e){super(),Q(this,e,Me,je,Y,{})}}export{Ve as component,Se as universal};
