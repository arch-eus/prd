import{s as K,e as b,a as j,c as g,b as $,B as z,g as w,f as _,y as T,i as L,h,n as I,z as ne,t as O,d as R,j as B,C as re,k as se}from"../chunks/scheduler.DrDOSCrp.js";import{S as Q,i as W,c as X,a as Z,m as ee,b as V,e as ae,t as H,d as te,g as le}from"../chunks/index.BljkXhbZ.js";import{d as oe}from"../chunks/index.D0tE5qX2.js";import{e as Y,t as ce}from"../chunks/Icon.C5GaHf5i.js";import{f as q}from"../chunks/format.DS6QGfyw.js";import{D as ie}from"../chunks/download.BFTxnY3b.js";const ue=()=>({}),Te=Object.freeze(Object.defineProperty({__proto__:null,load:ue},Symbol.toStringTag,{value:"Module"}));function F(c,e,n){const t=c.slice();return t[1]=e[n],t}function G(c){let e,n=c[1].description+"",t;return{c(){e=b("div"),t=O(n),this.h()},l(s){e=g(s,"DIV",{class:!0});var i=$(e);t=R(i,n),i.forEach(_),this.h()},h(){T(e,"class","text-xs text-navy-500 mt-1")},m(s,i){L(s,e,i),h(e,t)},p(s,i){i&1&&n!==(n=s[1].description+"")&&B(t,n)},d(s){s&&_(e)}}}function J(c){let e,n,t,s=c[1].title+"",i,a,d,l,o=(c[1].dueDate?q(new Date(c[1].dueDate),"MMM d, yyyy"):"")+"",u,r,v,D=c[1].recurrence+"",M,C,x,E=(c[1].labels?.join(", ")||"")+"",p,k,f=c[1].description&&G(c);return{c(){e=b("tr"),n=b("td"),t=b("div"),i=O(s),a=j(),f&&f.c(),d=j(),l=b("td"),u=O(o),r=j(),v=b("td"),M=O(D),C=j(),x=b("td"),p=O(E),k=j(),this.h()},l(m){e=g(m,"TR",{class:!0});var y=$(e);n=g(y,"TD",{class:!0});var S=$(n);t=g(S,"DIV",{});var P=$(t);i=R(P,s),P.forEach(_),a=w(S),f&&f.l(S),S.forEach(_),d=w(y),l=g(y,"TD",{class:!0});var U=$(l);u=R(U,o),U.forEach(_),r=w(y),v=g(y,"TD",{class:!0});var A=$(v);M=R(A,D),A.forEach(_),C=w(y),x=g(y,"TD",{class:!0});var N=$(x);p=R(N,E),N.forEach(_),k=w(y),y.forEach(_),this.h()},h(){T(n,"class","py-3 px-4"),T(l,"class","py-3 px-4"),T(v,"class","py-3 px-4"),T(x,"class","py-3 px-4"),T(e,"class","border-b border-navy-50 hover:bg-navy-50/50")},m(m,y){L(m,e,y),h(e,n),h(n,t),h(t,i),h(n,a),f&&f.m(n,null),h(e,d),h(e,l),h(l,u),h(e,r),h(e,v),h(v,M),h(e,C),h(e,x),h(x,p),h(e,k)},p(m,y){y&1&&s!==(s=m[1].title+"")&&B(i,s),m[1].description?f?f.p(m,y):(f=G(m),f.c(),f.m(n,null)):f&&(f.d(1),f=null),y&1&&o!==(o=(m[1].dueDate?q(new Date(m[1].dueDate),"MMM d, yyyy"):"")+"")&&B(u,o),y&1&&D!==(D=m[1].recurrence+"")&&B(M,D),y&1&&E!==(E=(m[1].labels?.join(", ")||"")+"")&&B(p,E)},d(m){m&&_(e),f&&f.d()}}}function de(c){let e,n,t,s='<tr class="border-b border-navy-100"><th class="py-3 px-4 text-left font-medium text-navy-600">Task</th> <th class="py-3 px-4 text-left font-medium text-navy-600">Due Date</th> <th class="py-3 px-4 text-left font-medium text-navy-600">Recurrence</th> <th class="py-3 px-4 text-left font-medium text-navy-600">Tags</th></tr>',i,a,d=Y(c[0]),l=[];for(let o=0;o<d.length;o+=1)l[o]=J(F(c,d,o));return{c(){e=b("div"),n=b("table"),t=b("thead"),t.innerHTML=s,i=j(),a=b("tbody");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=g(o,"DIV",{class:!0});var u=$(e);n=g(u,"TABLE",{class:!0});var r=$(n);t=g(r,"THEAD",{"data-svelte-h":!0}),z(t)!=="svelte-l78nuy"&&(t.innerHTML=s),i=w(r),a=g(r,"TBODY",{});var v=$(a);for(let D=0;D<l.length;D+=1)l[D].l(v);v.forEach(_),r.forEach(_),u.forEach(_),this.h()},h(){T(n,"class","w-full text-sm font-jetbrains-mono"),T(e,"class","overflow-x-auto")},m(o,u){L(o,e,u),h(e,n),h(n,t),h(n,i),h(n,a);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(a,null)},p(o,[u]){if(u&1){d=Y(o[0]);let r;for(r=0;r<d.length;r+=1){const v=F(o,d,r);l[r]?l[r].p(v,u):(l[r]=J(v),l[r].c(),l[r].m(a,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=d.length}},i:I,o:I,d(o){o&&_(e),ne(l,o)}}}function fe(c,e,n){let{tasks:t=[]}=e;return c.$$set=s=>{"tasks"in s&&n(0,t=s.tasks)},[t]}class he extends Q{constructor(e){super(),W(this,e,fe,de,K,{tasks:0})}}function pe(c){const e=["Title","Description","Due Date","Recurrence","Tags"],n=c.map(a=>[a.title,a.description||"",a.dueDate?q(a.dueDate,"yyyy-MM-dd"):"",a.recurrence||"",a.labels?.join(", ")||""]),t=[e.join(","),...n.map(a=>a.map(d=>`"${d}"`).join(","))].join(`
`),s=new Blob([t],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");i.href=URL.createObjectURL(s),i.download=`recurring-tasks-${q(new Date,"yyyy-MM-dd")}.csv`,i.click()}function me(c){let e,n;return e=new he({props:{tasks:c[0]}}),{c(){X(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,s){ee(e,t,s),n=!0},p(t,s){const i={};s&1&&(i.tasks=t[0]),e.$set(i)},i(t){n||(H(e.$$.fragment,t),n=!0)},o(t){V(e.$$.fragment,t),n=!1},d(t){te(e,t)}}}function _e(c){let e,n="No recurring tasks found";return{c(){e=b("p"),e.textContent=n,this.h()},l(t){e=g(t,"P",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-pimsxi"&&(e.textContent=n),this.h()},h(){T(e,"class","text-navy-500 text-center py-8 font-jetbrains-mono")},m(t,s){L(t,e,s)},p:I,i:I,o:I,d(t){t&&_(e)}}}function ve(c){let e,n,t,s="Recurring Tasks",i,a,d,l,o,u,r,v,D,M;d=new ie({props:{class:"w-4 h-4"}});const C=[_e,me],x=[];function E(p,k){return p[0].length===0?0:1}return u=E(c),r=x[u]=C[u](c),{c(){e=b("div"),n=b("div"),t=b("h2"),t.textContent=s,i=j(),a=b("button"),X(d.$$.fragment),l=O(`
      Export`),o=j(),r.c(),this.h()},l(p){e=g(p,"DIV",{class:!0});var k=$(e);n=g(k,"DIV",{class:!0});var f=$(n);t=g(f,"H2",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-qe6gcz"&&(t.textContent=s),i=w(f),a=g(f,"BUTTON",{class:!0});var m=$(a);Z(d.$$.fragment,m),l=R(m,`
      Export`),m.forEach(_),f.forEach(_),o=w(k),r.l(k),k.forEach(_),this.h()},h(){T(t,"class","text-2xl font-bold text-navy-900 font-jetbrains-mono"),T(a,"class","inline-flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-navy-600 hover:text-navy-800 hover:bg-navy-50 rounded-md transition-colors"),T(n,"class","flex justify-between items-center"),T(e,"class","space-y-6")},m(p,k){L(p,e,k),h(e,n),h(n,t),h(n,i),h(n,a),ee(d,a,null),h(a,l),h(e,o),x[u].m(e,null),v=!0,D||(M=re(a,"click",c[2]),D=!0)},p(p,[k]){let f=u;u=E(p),u===f?x[u].p(p,k):(le(),V(x[f],1,1,()=>{x[f]=null}),ae(),r=x[u],r?r.p(p,k):(r=x[u]=C[u](p),r.c()),H(r,1),r.m(e,null))},i(p){v||(H(d.$$.fragment,p),H(r),v=!0)},o(p){V(d.$$.fragment,p),V(r),v=!1},d(p){p&&_(e),te(d),x[u].d(),D=!1,M()}}}function ye(c,e,n){let t;const s=oe(ce,a=>(a.tasks||[]).filter(d=>d.status==="todo"&&d.recurrence).sort((d,l)=>{const o={monthly:1,quarterly:2,yearly:3},u=d.recurrence&&o[d.recurrence]||0,r=l.recurrence&&o[l.recurrence]||0;return u-r}));se(c,s,a=>n(0,t=a));function i(){pe(t)}return[t,s,i]}class Ee extends Q{constructor(e){super(),W(this,e,ye,ve,K,{})}}export{Ee as component,Te as universal};
