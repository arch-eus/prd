import{s as R,l as B,m as Q,o as ve,u as be,p as Me,q as ke,e as k,t as A,c as w,b as y,d as j,f as v,y as b,i as U,h as d,j as L,n as oe,a as E,g as C,C as te,P as ie,M as Ie,v as Ee,L as Ce,z as Fe}from"./scheduler.DrDOSCrp.js";import{S as x,i as z,c as F,a as O,m as S,t as f,b as p,d as V,g as P,e as q,h as ce}from"./index.BljkXhbZ.js";import{d as M,I as we,g as ye,a as Te,s as Oe,e as ue}from"./Icon.C5GaHf5i.js";import{R as Se,f as fe}from"./index.CSbLPxVj.js";import{d as Ve,f as de}from"./format.DS6QGfyw.js";import{T as He}from"./tag.COAFjn-V.js";function ne(r,e){const s=M(r),n=M(e),t=s.getTime()-n.getTime();return t<0?-1:t>0?1:t}function Ye(r,e){const s=M(r),n=M(e),t=s.getFullYear()-n.getFullYear(),a=s.getMonth()-n.getMonth();return t*12+a}function Ne(r,e){const s=M(r),n=M(e),t=me(s,n),a=Math.abs(Ve(s,n));s.setDate(s.getDate()-t*a);const l=+(me(s,n)===-t),i=t*(a-l);return i===0?0:i}function me(r,e){const s=r.getFullYear()-e.getFullYear()||r.getMonth()-e.getMonth()||r.getDate()-e.getDate()||r.getHours()-e.getHours()||r.getMinutes()-e.getMinutes()||r.getSeconds()-e.getSeconds()||r.getMilliseconds()-e.getMilliseconds();return s<0?-1:s>0?1:s}function Ae(r){return e=>{const n=(r?Math[r]:Math.trunc)(e);return n===0?0:n}}function je(r){const e=M(r);return e.setHours(23,59,59,999),e}function Be(r){const e=M(r),s=e.getMonth();return e.setFullYear(e.getFullYear(),s+1,0),e.setHours(23,59,59,999),e}function Pe(r){const e=M(r);return+je(e)==+Be(e)}function qe(r,e){const s=M(r),n=M(e),t=ne(s,n),a=Math.abs(Ye(s,n));let l;if(a<1)l=0;else{s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-t*a);let i=ne(s,n)===-t;Pe(M(r))&&a===1&&ne(r,n)===1&&(i=!1),l=t*(a-Number(i))}return l===0?0:l}function Le(r,e,s){const n=Ne(r,e)/7;return Ae(s?.roundingMethod)(n)}function Re(r,e){const s=M(r),n=M(e);return+s<+n}function Ue(r){let e;const s=r[2].default,n=ve(s,r,r[3],null);return{c(){n&&n.c()},l(t){n&&n.l(t)},m(t,a){n&&n.m(t,a),e=!0},p(t,a){n&&n.p&&(!e||a&8)&&be(n,s,t,t[3],e?ke(s,t[3],a,null):Me(t[3]),null)},i(t){e||(f(n,t),e=!0)},o(t){p(n,t),e=!1},d(t){n&&n.d(t)}}}function xe(r){let e,s;const n=[{name:"check"},r[1],{iconNode:r[0]}];let t={$$slots:{default:[Ue]},$$scope:{ctx:r}};for(let a=0;a<n.length;a+=1)t=B(t,n[a]);return e=new we({props:t}),{c(){F(e.$$.fragment)},l(a){O(e.$$.fragment,a)},m(a,l){S(e,a,l),s=!0},p(a,[l]){const i=l&3?ye(n,[n[0],l&2&&Te(a[1]),l&1&&{iconNode:a[0]}]):{};l&8&&(i.$$scope={dirty:l,ctx:a}),e.$set(i)},i(a){s||(f(e.$$.fragment,a),s=!0)},o(a){p(e.$$.fragment,a),s=!1},d(a){V(e,a)}}}function ze(r,e,s){let{$$slots:n={},$$scope:t}=e;const a=[["path",{d:"M20 6 9 17l-5-5"}]];return r.$$set=l=>{s(1,e=B(B({},e),Q(l))),"$$scope"in l&&s(3,t=l.$$scope)},e=Q(e),[a,e,n,t]}class We extends x{constructor(e){super(),z(this,e,ze,xe,R,{})}}function Ge(r){let e;const s=r[2].default,n=ve(s,r,r[3],null);return{c(){n&&n.c()},l(t){n&&n.l(t)},m(t,a){n&&n.m(t,a),e=!0},p(t,a){n&&n.p&&(!e||a&8)&&be(n,s,t,t[3],e?ke(s,t[3],a,null):Me(t[3]),null)},i(t){e||(f(n,t),e=!0)},o(t){p(n,t),e=!1},d(t){n&&n.d(t)}}}function Je(r){let e,s;const n=[{name:"trash-2"},r[1],{iconNode:r[0]}];let t={$$slots:{default:[Ge]},$$scope:{ctx:r}};for(let a=0;a<n.length;a+=1)t=B(t,n[a]);return e=new we({props:t}),{c(){F(e.$$.fragment)},l(a){O(e.$$.fragment,a)},m(a,l){S(e,a,l),s=!0},p(a,[l]){const i=l&3?ye(n,[n[0],l&2&&Te(a[1]),l&1&&{iconNode:a[0]}]):{};l&8&&(i.$$scope={dirty:l,ctx:a}),e.$set(i)},i(a){s||(f(e.$$.fragment,a),s=!0)},o(a){p(e.$$.fragment,a),s=!1},d(a){V(e,a)}}}function Ke(r,e,s){let{$$slots:n={},$$scope:t}=e;const a=[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]];return r.$$set=l=>{s(1,e=B(B({},e),Q(l))),"$$scope"in l&&s(3,t=l.$$scope)},e=Q(e),[a,e,n,t]}class Qe extends x{constructor(e){super(),z(this,e,Ke,Je,R,{})}}function Xe(r){let e,s,n;return{c(){e=k("span"),s=A("+"),n=A(r[0]),this.h()},l(t){e=w(t,"SPAN",{class:!0});var a=y(e);s=j(a,"+"),n=j(a,r[0]),a.forEach(v),this.h()},h(){b(e,"class","inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-red-50 text-red-700")},m(t,a){U(t,e,a),d(e,s),d(e,n)},p(t,[a]){a&1&&L(n,t[0])},i:oe,o:oe,d(t){t&&v(e)}}}function Ze(r,e,s){let n,{dueDate:t}=e;return r.$$set=a=>{"dueDate"in a&&s(1,t=a.dueDate)},r.$$.update=()=>{r.$$.dirty&2&&s(0,n=(()=>{const a=Ne(new Date,t);if(a<7)return`${a}d`;const l=Le(new Date,t);return l<4?`${l}w`:`${qe(new Date,t)}m`})())},[n,t]}class et extends x{constructor(e){super(),z(this,e,Ze,Xe,R,{dueDate:1})}}function tt(r){let e,s,n,t,a,l=de(r[1],"MMM d")+"",i,o;return s=new Se({props:{class:"w-3 h-3"}}),{c(){e=k("span"),F(s.$$.fragment),n=E(),t=A(r[0]),a=A(" · next: "),i=A(l),this.h()},l(c){e=w(c,"SPAN",{class:!0});var m=y(e);O(s.$$.fragment,m),n=C(m),t=j(m,r[0]),a=j(m," · next: "),i=j(m,l),m.forEach(v),this.h()},h(){b(e,"class","flex items-center gap-1 text-xs text-navy-400")},m(c,m){U(c,e,m),S(s,e,null),d(e,n),d(e,t),d(e,a),d(e,i),o=!0},p(c,[m]){(!o||m&1)&&L(t,c[0]),(!o||m&2)&&l!==(l=de(c[1],"MMM d")+"")&&L(i,l)},i(c){o||(f(s.$$.fragment,c),o=!0)},o(c){p(s.$$.fragment,c),o=!1},d(c){c&&v(e),V(s)}}}function nt(r,e,s){let{recurrence:n}=e,{nextDueDate:t}=e;return r.$$set=a=>{"recurrence"in a&&s(0,n=a.recurrence),"nextDueDate"in a&&s(1,t=a.nextDueDate)},[n,t]}class st extends x{constructor(e){super(),z(this,e,nt,tt,R,{recurrence:0,nextDueDate:1})}}function at(r){return!r.dueDate||r.status==="completed"?!1:Re(r.dueDate,Oe(new Date))}function he(r,e,s){const n=r.slice();return n[7]=e[s],n}function _e(r){let e,s;return e=new We({props:{class:"w-3 h-3 text-navy-600"}}),{c(){F(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,t){S(e,n,t),s=!0},i(n){s||(f(e.$$.fragment,n),s=!0)},o(n){p(e.$$.fragment,n),s=!1},d(n){V(e,n)}}}function ge(r){let e,s;return e=new et({props:{dueDate:r[0].dueDate}}),{c(){F(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,t){S(e,n,t),s=!0},p(n,t){const a={};t&1&&(a.dueDate=n[0].dueDate),e.$set(a)},i(n){s||(f(e.$$.fragment,n),s=!0)},o(n){p(e.$$.fragment,n),s=!1},d(n){V(e,n)}}}function pe(r){let e,s,n=ue(r[0].labels),t=[];for(let l=0;l<n.length;l+=1)t[l]=De(he(r,n,l));const a=l=>p(t[l],1,1,()=>{t[l]=null});return{c(){e=k("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=w(l,"DIV",{class:!0});var i=y(e);for(let o=0;o<t.length;o+=1)t[o].l(i);i.forEach(v),this.h()},h(){b(e,"class","flex gap-1 flex-wrap")},m(l,i){U(l,e,i);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null);s=!0},p(l,i){if(i&1){n=ue(l[0].labels);let o;for(o=0;o<n.length;o+=1){const c=he(l,n,o);t[o]?(t[o].p(c,i),f(t[o],1)):(t[o]=De(c),t[o].c(),f(t[o],1),t[o].m(e,null))}for(P(),o=n.length;o<t.length;o+=1)a(o);q()}},i(l){if(!s){for(let i=0;i<n.length;i+=1)f(t[i]);s=!0}},o(l){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)p(t[i]);s=!1},d(l){l&&v(e),Fe(t,l)}}}function De(r){let e,s,n,t=r[7]+"",a,l,i;return s=new He({props:{class:"w-3 h-3"}}),{c(){e=k("span"),F(s.$$.fragment),n=E(),a=A(t),l=E(),this.h()},l(o){e=w(o,"SPAN",{class:!0});var c=y(e);O(s.$$.fragment,c),n=C(c),a=j(c,t),l=C(c),c.forEach(v),this.h()},h(){b(e,"class","flex items-center gap-1 text-xs bg-navy-50 text-navy-700 px-1.5 py-0.5 rounded")},m(o,c){U(o,e,c),S(s,e,null),d(e,n),d(e,a),d(e,l),i=!0},p(o,c){(!i||c&1)&&t!==(t=o[7]+"")&&L(a,t)},i(o){i||(f(s.$$.fragment,o),i=!0)},o(o){p(s.$$.fragment,o),i=!1},d(o){o&&v(e),V(s)}}}function $e(r){let e,s;return e=new st({props:{recurrence:r[0].recurrence,nextDueDate:r[0].dueDate}}),{c(){F(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,t){S(e,n,t),s=!0},p(n,t){const a={};t&1&&(a.recurrence=n[0].recurrence),t&1&&(a.nextDueDate=n[0].dueDate),e.$set(a)},i(n){s||(f(e.$$.fragment,n),s=!0)},o(n){p(e.$$.fragment,n),s=!1},d(n){V(e,n)}}}function rt(r){let e,s,n,t,a,l,i=r[0].title+"",o,c,m,X,T,W,Z,N,H,I,Y,ee,se,D=r[0].status==="completed"&&_e(),h=r[1]&&r[0].status!=="completed"&&r[0].dueDate&&ge(r),_=r[0].labels?.length&&pe(r),g=r[0].recurrence&&r[0].dueDate&&$e(r);return H=new Qe({props:{class:"w-4 h-4"}}),{c(){e=k("div"),s=k("button"),D&&D.c(),n=E(),t=k("div"),a=k("div"),l=k("h3"),o=A(i),m=E(),h&&h.c(),X=E(),T=k("div"),_&&_.c(),W=E(),g&&g.c(),Z=E(),N=k("button"),F(H.$$.fragment),this.h()},l(u){e=w(u,"DIV",{class:!0});var $=y(e);s=w($,"BUTTON",{class:!0,"aria-label":!0});var ae=y(s);D&&D.l(ae),ae.forEach(v),n=C($),t=w($,"DIV",{class:!0});var G=y(t);a=w(G,"DIV",{class:!0});var J=y(a);l=w(J,"H3",{class:!0});var re=y(l);o=j(re,i),re.forEach(v),m=C(J),h&&h.l(J),J.forEach(v),X=C(G),T=w(G,"DIV",{class:!0});var K=y(T);_&&_.l(K),W=C(K),g&&g.l(K),K.forEach(v),G.forEach(v),Z=C($),N=w($,"BUTTON",{class:!0,"aria-label":!0});var le=y(N);O(H.$$.fragment,le),le.forEach(v),$.forEach(v),this.h()},h(){b(s,"class","w-5 h-5 rounded-full border-2 border-navy-200 hover:border-navy-600 flex items-center justify-center transition-colors"),b(s,"aria-label","Complete task"),b(l,"class",c="text-base text-navy-900 truncate "+(r[0].status==="completed"?"line-through text-navy-400":"")),b(a,"class","flex items-center gap-2"),b(T,"class","flex flex-wrap gap-2 mt-1"),b(t,"class","flex-1 min-w-0"),b(N,"class","p-2 hover:bg-red-50 rounded text-red-500 opacity-0 group-hover:opacity-100 transition-opacity"),b(N,"aria-label","Delete task"),b(e,"class","group flex items-center gap-4 p-3 bg-surface rounded-lg shadow-soft hover:shadow-medium transition-all cursor-pointer font-jetbrains-mono")},m(u,$){U(u,e,$),d(e,s),D&&D.m(s,null),d(e,n),d(e,t),d(t,a),d(a,l),d(l,o),d(a,m),h&&h.m(a,null),d(t,X),d(t,T),_&&_.m(T,null),d(T,W),g&&g.m(T,null),d(e,Z),d(e,N),S(H,N,null),Y=!0,ee||(se=[te(s,"click",ie(r[2])),te(N,"click",ie(r[3])),te(e,"click",r[4])],ee=!0)},p(u,[$]){u[0].status==="completed"?D?$&1&&f(D,1):(D=_e(),D.c(),f(D,1),D.m(s,null)):D&&(P(),p(D,1,1,()=>{D=null}),q()),(!Y||$&1)&&i!==(i=u[0].title+"")&&L(o,i),(!Y||$&1&&c!==(c="text-base text-navy-900 truncate "+(u[0].status==="completed"?"line-through text-navy-400":"")))&&b(l,"class",c),u[1]&&u[0].status!=="completed"&&u[0].dueDate?h?(h.p(u,$),$&3&&f(h,1)):(h=ge(u),h.c(),f(h,1),h.m(a,null)):h&&(P(),p(h,1,1,()=>{h=null}),q()),u[0].labels?.length?_?(_.p(u,$),$&1&&f(_,1)):(_=pe(u),_.c(),f(_,1),_.m(T,W)):_&&(P(),p(_,1,1,()=>{_=null}),q()),u[0].recurrence&&u[0].dueDate?g?(g.p(u,$),$&1&&f(g,1)):(g=$e(u),g.c(),f(g,1),g.m(T,null)):g&&(P(),p(g,1,1,()=>{g=null}),q())},i(u){Y||(f(D),f(h),f(_),f(g),f(H.$$.fragment,u),u&&Ie(()=>{Y&&(I||(I=ce(e,fe,{},!0)),I.run(1))}),Y=!0)},o(u){p(D),p(h),p(_),p(g),p(H.$$.fragment,u),u&&(I||(I=ce(e,fe,{},!1)),I.run(0)),Y=!1},d(u){u&&v(e),D&&D.d(),h&&h.d(),_&&_.d(),g&&g.d(),V(H),u&&I&&I.end(),ee=!1,Ee(se)}}}function lt(r,e,s){let n,{task:t}=e,{showDetails:a=!1}=e;const l=Ce();function i(){l("complete",{id:t.id})}function o(){l("delete",{id:t.id})}function c(){t.status==="completed"?l("showDetails",{id:t.id}):l("edit",{id:t.id})}return r.$$set=m=>{"task"in m&&s(0,t=m.task),"showDetails"in m&&s(5,a=m.showDetails)},r.$$.update=()=>{r.$$.dirty&1&&s(1,n=at(t))},[t,n,i,o,c,a]}class mt extends x{constructor(e){super(),z(this,e,lt,rt,R,{task:0,showDetails:5})}}export{mt as T};
